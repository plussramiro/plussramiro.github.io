{% if site.data.affiliations and site.data.affiliations.size > 0 %}
  <style>
    .affiliations-cv .affiliation-logo-cv-link {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 120px;
      height: 72px;
      overflow: hidden;
      text-decoration: none;
      transform-origin: center;
      transition: transform 0.14s ease;
    }

    .affiliations-cv .affiliation-logo-cv-link:hover {
      transform: scale(1.03);
    }

    .affiliations-cv .affiliation-logo-cv-link:active {
      transform: scale(1.08);
    }

    .affiliations-cv .affiliation-logo-cv {
      display: block;
      max-width: 112px;
      max-height: 56px;
      width: auto;
      height: auto;
      object-fit: contain;
    }

    @media (max-width: 767.98px) {
      .affiliations-cv .date-column .badge {
        font-size: 0.62rem;
        line-height: 1.1;
        padding: 0.12rem 0.3rem;
        min-width: 0 !important;
        max-width: 72px;
        white-space: normal;
        overflow-wrap: anywhere;
      }

      .affiliations-cv .affiliation-logo-cv-link {
        width: 105px;
        height: 64px;
      }

      .affiliations-cv .affiliation-logo-cv {
        max-width: 98px;
        max-height: 50px;
      }
    }
  </style>
  <section
    class="affiliations-section"
    {% if include.show_title != false %}aria-labelledby="affiliations-title"{% else %}aria-label="Affiliations and support"{% endif %}
  >
    {% if include.show_title != false %}
      <h2 id="affiliations-title">
        <i class="fa-solid fa-building-columns" aria-hidden="true"></i>
        Affiliations & Support
      </h2>
    {% endif %}

    <div class="cv affiliations-cv">
      <div class="card mt-3 p-3">
        <ul class="card-text font-weight-light list-group list-group-flush">
          {% for affiliation in site.data.affiliations %}
            {% assign display_name = affiliation.full_name | default: affiliation.name %}
            {% if affiliation.alt %}
              {% assign alt_text = affiliation.alt %}
            {% else %}
              {% assign alt_text = affiliation.name | append: ' logo' %}
            {% endif %}
            <li class="list-group-item">
              <div class="row">
                <div class="col-xs-2 col-sm-2 col-md-2 text-center date-column">
                  <table class="table-cv">
                    <tbody>
                      {% if affiliation.period %}
                        <tr>
                          <td>
                            <span class="badge font-weight-bold danger-color-dark align-middle" style="min-width: 75px">
                              {{ affiliation.period }}
                            </span>
                          </td>
                        </tr>
                      {% endif %}
                      <tr>
                        <td>
                          <a
                            class="affiliation-logo-cv-link"
                            href="{{ affiliation.url }}"
                            target="_blank"
                            rel="noopener noreferrer"
                            aria-label="{{ affiliation.name }}"
                            title="{{ affiliation.name }}"
                          >
                            <img
                              class="affiliation-logo-cv"
                              src="{{ affiliation.logo | relative_url }}"
                              alt="{{ alt_text }}"
                              loading="lazy"
                            >
                          </a>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="col-xs-10 col-sm-10 col-md-10 mt-2 mt-md-0">
                  <h6 class="title font-weight-bold ml-1 ml-md-4">{{ display_name }}</h6>
                  {% if affiliation.role %}
                    <h6 class="ml-1 ml-md-4" style="font-size: 0.95rem">{{ affiliation.role }}</h6>
                  {% endif %}
                </div>
              </div>
            </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </section>
{% endif %}
