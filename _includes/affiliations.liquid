{% if site.data.affiliations and site.data.affiliations.size > 0 %}
  <section
    class="affiliations-section"
    {% if include.show_title != false %}aria-labelledby="affiliations-title"{% else %}aria-label="Affiliations and support"{% endif %}
  >
    {% if include.show_title != false %}
      <h2 id="affiliations-title">
        <i class="fa-solid fa-building-columns" aria-hidden="true"></i>
        Affiliations & Support
      </h2>
    {% endif %}

    <div class="affiliations-list">
      {% for affiliation in site.data.affiliations %}
        {% assign display_name = affiliation.full_name | default: affiliation.name %}
        {% if affiliation.alt %}
          {% assign alt_text = affiliation.alt %}
        {% else %}
          {% assign alt_text = affiliation.name | append: ' logo' %}
        {% endif %}
        <article class="affiliation-entry">
          <div class="affiliation-entry__media">
            {% if affiliation.period %}
              <span class="affiliation-badge">{{ affiliation.period }}</span>
            {% endif %}
            <a
              class="affiliation-logo-link"
              href="{{ affiliation.url }}"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="{{ affiliation.name }}"
              title="{{ affiliation.name }}"
            >
              <img
                src="{{ affiliation.logo | relative_url }}"
                alt="{{ alt_text }}"
                loading="lazy"
                width="220"
                height="72"
              >
            </a>
          </div>
          <div class="affiliation-entry__content">
            <h3 class="affiliation-name">
              <a href="{{ affiliation.url }}" target="_blank" rel="noopener noreferrer">{{ display_name }}</a>
            </h3>
          </div>
        </article>
      {% endfor %}
    </div>
  </section>
{% endif %}
