const highlightSearchTerm=({search:e,selector:t,customHighlightName:n="search"})=>{if(!t)throw new Error("The selector argument is required");if(!CSS.highlights)return;if(CSS.highlights.delete(n),!e)return;const r=[],o=[],h=document.querySelectorAll(t);if(Array.from(h).forEach(t=>{let n=!1;getTextNodesInElementContainingText(t,e).forEach(t=>{const o=getRangesForSearchTermInNode(t,e);r.push(...o),o.length>0&&(n=!0)}),n||o.push(t)}),0===r.length)return o;const s=new Highlight(...r);return CSS.highlights.set(n,s),o},getTextNodesInElementContainingText=(e,t)=>{const n=[],r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT);let o;for(;o=r.nextNode();)o.textContent&&o.textContent.toLowerCase().includes(t)&&n.push(o);return n},getRangesForSearchTermInNode=(e,t)=>{const n=[],r=(e.textContent?e.textContent.toLowerCase():"")||"";let o,h=0;for(;(o=r.indexOf(t,h))>=0;){const r=new Range;r.setStart(e,o),r.setEnd(e,o+t.length),n.push(r),h=o+t.length}return n};export{highlightSearchTerm};